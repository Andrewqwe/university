-- MySQL Script generated by MySQL Workbench
-- 01/02/17 18:01:34
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema fitness
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema fitness
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `fitness` DEFAULT CHARACTER SET utf8 ;
USE `fitness` ;

-- -----------------------------------------------------
-- Table `fitness`.`Trenerzy`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `fitness`.`Trenerzy` ;

CREATE TABLE IF NOT EXISTS `fitness`.`Trenerzy` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `imie` VARCHAR(45) NOT NULL,
  `nazwisko` VARCHAR(45) NOT NULL,
  `pensja` INT NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `fitness`.`Sale`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `fitness`.`Sale` ;

CREATE TABLE IF NOT EXISTS `fitness`.`Sale` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `liczba_miejsc` INT NOT NULL,
  `typ` CHAR(1) NOT NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `fitness`.`Zajecia`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `fitness`.`Zajecia` ;

CREATE TABLE IF NOT EXISTS `fitness`.`Zajecia` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `dla_kogo` CHAR(1) NULL,
  `godzina_rozpoczecia` CHAR(5) NOT NULL,
  `godzina_zakonczenia` CHAR(5) NOT NULL,
  `ID_sali` INT NOT NULL,
  `ID_trenera` INT NOT NULL,
  `dzien_tygodnia` INT NOT NULL,
  PRIMARY KEY (`ID`, `ID_sali`, `ID_trenera`),
  INDEX `fk_Zajecia_Sale1_idx` (`ID_sali` ASC),
  INDEX `fk_Zajecia_Trenerzy1_idx` (`ID_trenera` ASC),
  CONSTRAINT `fk_Zajecia_Sale1`
    FOREIGN KEY (`ID_sali`)
    REFERENCES `fitness`.`Sale` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Zajecia_Trenerzy1`
    FOREIGN KEY (`ID_trenera`)
    REFERENCES `fitness`.`Trenerzy` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `fitness`.`Klienci`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `fitness`.`Klienci` ;

CREATE TABLE IF NOT EXISTS `fitness`.`Klienci` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `imie` VARCHAR(45) NOT NULL,
  `nazwisko` VARCHAR(45) NOT NULL,
  `wiek` INT NULL,
  `plec` CHAR(1) NULL,
  `typ_karnetu` CHAR(1) NOT NULL,
  `data_wygasniecia_karnetu` DATE NOT NULL,
  `email` VARCHAR(45) NOT NULL,
  `haslo` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `fitness`.`Zapisani`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `fitness`.`Zapisani` ;

CREATE TABLE IF NOT EXISTS `fitness`.`Zapisani` (
  `Zajecia_ID` INT NOT NULL,
  `Klienci_ID` INT NOT NULL,
  PRIMARY KEY (`Zajecia_ID`, `Klienci_ID`),
  INDEX `fk_Zapisani_Zajecia_idx` (`Zajecia_ID` ASC),
  INDEX `fk_Zapisani_Klienci1_idx` (`Klienci_ID` ASC),
  CONSTRAINT `fk_Zapisani_Zajecia`
    FOREIGN KEY (`Zajecia_ID`)
    REFERENCES `fitness`.`Zajecia` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Zapisani_Klienci1`
    FOREIGN KEY (`Klienci_ID`)
    REFERENCES `fitness`.`Klienci` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- ---------------------------------------------------------------------------------------------

insert into Trenerzy (ID, imie, nazwisko, pensja) values (1, 'Michał', 'Karmowski', 2666);
insert into Trenerzy (ID, imie, nazwisko, pensja) values (2, 'Karol', 'Kremówkarz', 2137);
insert into Trenerzy (ID, imie, nazwisko, pensja) values (3, 'Billy', 'Herrington', 3000);

insert into Sale (ID, liczba_miejsc, typ) values (1, 15, 'S');
insert into Sale (ID, liczba_miejsc, typ) values (2, 20, 'S');
insert into Sale (ID, liczba_miejsc, typ) values (3, 30, 'F');

insert into Zajecia (ID, dla_kogo, godzina_rozpoczecia, godzina_zakonczenia, ID_sali, ID_trenera, dzien_tygodnia) values (1, 'K', '17:30', '19:00', 3, 2, 1);
insert into Zajecia (ID, dla_kogo, godzina_rozpoczecia, godzina_zakonczenia, ID_sali, ID_trenera, dzien_tygodnia) values (2, 'M', '9:30', '11:00', 1, 3, 2);
insert into Zajecia (ID, dla_kogo, godzina_rozpoczecia, godzina_zakonczenia, ID_sali, ID_trenera, dzien_tygodnia) values (3, 'M', '10:30', '12:00', 2, 1, 3);
insert into Zajecia (ID, dla_kogo, godzina_rozpoczecia, godzina_zakonczenia, ID_sali, ID_trenera, dzien_tygodnia) values (4, 'K', '19:30', '21:00', 3, 2, 4);
insert into Zajecia (ID, dla_kogo, godzina_rozpoczecia, godzina_zakonczenia, ID_sali, ID_trenera, dzien_tygodnia) values (5, 'M', '11:30', '13:00', 1, 3, 5);
insert into Zajecia (ID, dla_kogo, godzina_rozpoczecia, godzina_zakonczenia, ID_sali, ID_trenera, dzien_tygodnia) values (6, 'K', '17:30', '19:00', 3, 3, 6);
insert into Zajecia (ID, dla_kogo, godzina_rozpoczecia, godzina_zakonczenia, ID_sali, ID_trenera, dzien_tygodnia) values (7, 'M', '6:30', '10:00', 2, 2, 7);

insert into Klienci (ID, imie, nazwisko, wiek, plec, typ_karnetu, data_wygasniecia_karnetu, email, haslo) values (1, 'Sebastian', 'Suchoklates', 21, 'M', 'S', '2017-02-13', 'seba@gmail.com', '123456');
insert into Klienci (ID, imie, nazwisko, wiek, plec, typ_karnetu, data_wygasniecia_karnetu, email, haslo) values (2, 'Marian', 'Kowalski', 52, 'M', 'S', '2017-02-11', 'marian@gmail.com', 'husaria');
insert into Klienci (ID, imie, nazwisko, wiek, plec, typ_karnetu, data_wygasniecia_karnetu, email, haslo) values (3, 'Ewa', 'Chodakońska', 34, 'K', 'F', '2017-03-14', 'ewa@wp.com', 'trudnehaslo');
insert into Klienci (ID, imie, nazwisko, wiek, plec, typ_karnetu, data_wygasniecia_karnetu, email, haslo) values (4, 'Jarosław', 'Jarząbkowski', 28, 'M', 'S', '2017-01-14', 'pasha@hotmail.com', 'myfriend');

insert into Zapisani (Zajecia_ID, Klienci_ID) values (2, 1);
insert into Zapisani (Zajecia_ID, Klienci_ID) values (3, 1);
insert into Zapisani (Zajecia_ID, Klienci_ID) values (5, 2);
insert into Zapisani (Zajecia_ID, Klienci_ID) values (7, 2);
insert into Zapisani (Zajecia_ID, Klienci_ID) values (1, 3);
insert into Zapisani (Zajecia_ID, Klienci_ID) values (4, 3);
insert into Zapisani (Zajecia_ID, Klienci_ID) values (6, 3);
insert into Zapisani (Zajecia_ID, Klienci_ID) values (1, 4);







